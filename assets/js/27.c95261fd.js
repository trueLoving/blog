(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{214:function(s,t,n){"use strict";n.r(t);var a=n(9),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"基本认识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本认识"}},[s._v("#")]),s._v(" 基本认识")]),s._v(" "),n("p",[n("code",[s._v("hoisting(变量提升)")]),s._v("，所描述的是JavaScript代码在运行中所产生的一种现象。")]),s._v(" "),n("p",[s._v("用简单的话来讲就是JavaScript引擎在运行JavaScript代码时会"),n("code",[s._v("先处理声明变量的代码，再从第一行执行代码")])]),s._v(" "),n("p",[s._v("hoisting产生的原因与JavaScript引擎解析JavaScript代码的机制有关，因此只有理解JavaScript引擎解析代码的机制才能明白hoisting")]),s._v(" "),n("h2",{attrs:{id:"引擎解析代码机制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#引擎解析代码机制"}},[s._v("#")]),s._v(" 引擎解析代码机制")]),s._v(" "),n("p",[s._v("引擎解析代码主要分为以下两步")]),s._v(" "),n("ol",[n("li",[s._v("预处理")]),s._v(" "),n("li",[s._v("执行代码")])]),s._v(" "),n("h4",{attrs:{id:"预处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#预处理"}},[s._v("#")]),s._v(" 预处理")]),s._v(" "),n("p",[s._v("在这个阶段，引擎会通览代码，并遇到以下关键字（主要是声明变量的关键字）时会进行一些相关处理")]),s._v(" "),n("p",[n("strong",[s._v("主要关键字如下")])]),s._v(" "),n("ol",[n("li",[s._v("let")]),s._v(" "),n("li",[s._v("const")]),s._v(" "),n("li",[s._v("class")]),s._v(" "),n("li",[s._v("var")]),s._v(" "),n("li",[s._v("function")])]),s._v(" "),n("p",[s._v("当遇到这些关键字时，引擎会为每一个声明的变量在内存中创建一个独一无二的空间，并且会做一些相关处理。")]),s._v(" "),n("p",[s._v("例如当遇到用var声明的变量时会初始化定义为"),n("code",[s._v("undefined")]),s._v(",")]),s._v(" "),n("p",[s._v("而遇到let,const or class声明的变量时会标记该变量为"),n("code",[s._v("uninitialize")]),s._v("，且不可使用")]),s._v(" "),n("p",[s._v("而遇到函数定义时会先进行函数的定义")]),s._v(" "),n("p",[n("strong",[s._v("测试代码如下")])]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// throw an error:Cannot access 'letA' before initialization   ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// console.log(letA);")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" letA "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// throw an error:Cannot access 'constA' before initialization  ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// console.log(constA);")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" constA "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// throw an error:Cannot access 'classA' before initialization  ")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// console.log(classA);")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("classA")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// undefined")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("varA"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" varA "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// fA()")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fA"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("fA")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello fA"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("div",{staticClass:"language-txt line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("在这里提一下函数声明的三种方式\n1. new Function(例如var f = new Function(...args))\n2. 函数声明(例如f(){})\n3. 函数表达式(例如var f = function(){})\n其中，只有第二种方法声明的函数是支持hoisiting,其他声明是不支持hoisting\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h4",{attrs:{id:"执行代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#执行代码"}},[s._v("#")]),s._v(" 执行代码")]),s._v(" "),n("p",[s._v("当JavaSript引擎执行完成第一步时，就开始进行第二步操作")]),s._v(" "),n("p",[s._v("从代码的第一行开始执行，按照代码执行流的顺序执行，遇到函数就跳入到函数执行，遇到异步代码就按照异步代码机制执行")]),s._v(" "),n("h2",{attrs:{id:"var-hoisting-vs-function-hoisting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#var-hoisting-vs-function-hoisting"}},[s._v("#")]),s._v(" var hoisting vs function hoisting")]),s._v(" "),n("p",[s._v("简而言之，函数提升大于变量提升")]),s._v(" "),n("p",[s._v("什么意思，以下面的代码作为例子说明")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ƒ a(){ // 2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v('//   console.log("hello a");')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// }")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("var")]),s._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("a")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2")]),s._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello a"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br")])]),n("p",[s._v("在这里，我们分别使用var和function定义了一个同名的变量，而当我们打印该变量时发现打印出来的结果是function定义的变量")]),s._v(" "),n("p",[s._v("这个就说明了一个现象function定义变量的执行比var定义变量的执行要高,即"),n("code",[s._v("函数提升大于变量提升")])]),s._v(" "),n("h2",{attrs:{id:"let-const-hoisting"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#let-const-hoisting"}},[s._v("#")]),s._v(" let&const hoisting")]),s._v(" "),n("p",[s._v("let/const/class声明的变量也有hoisting现象."),n("br"),s._v("\n只是与var/function处理的措施不同，let/const/class声明的变量只是被引擎处于标记为"),n("code",[s._v("uninitialize")]),s._v("，并没有为那些变量赋初始值。"),n("br"),s._v("\n在变量被声明和变量被真正初始化之间的这段时间被称为"),n("code",[s._v("temporal dead zone(临时死区)")]),s._v("。如果我们尝试在这段时间去访问这些变量，我们会得到一个变量引用错误的异常报错\n犹如下面例子")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// throw an error:Cannot access 'a' before initialization")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("a"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("let")]),s._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("因为变量a没有被初始化赋值，因此在我们访问该变量时会报异常错误说变量a没有被定义。")])])}),[],!1,null,null,null);t.default=e.exports}}]);